<!--
Alex Luo, Evan Chan, Leon Huang, Stanley Hoo
KungFuPandaSquad 
SoftDev
P02: Makers Makin' It, Act I
2025-1-9
Time spent: x
-->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Steak Co. Home</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    </head>
    <body>

    <header>
        <!-- Allows flashing messages in the html -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash-message {{ category }}">{{ message }}</div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    </header>

    <nav class="navbar">
        <ul>
            <li><a href="{{ url_for('home') }}">Home</a></li>
            <li><a href="{{ url_for('show_leaderboard') }}">Leaderboard</a></li>
            {% if username %}
            <li class="logout-button">
                <form action="{{ url_for('logout') }}" method="POST">
                    <button type="submit">Logout</button>
                </form>
            </li>
            {% endif %}
        </ul>
    </nav>
    
    <h1 class="home-title">Steak Co.</h1>
        

    {% if username %}
        <h2 class="home-subtitle">Welcome back, {{ username }}!</h2>
        <p class="home-paragraph">Your current balance is: <strong>{{ balance }}</strong></p>

        <div class="game-buttons-container">
            <a href="{{ url_for('play_blackjack') }}" class="game-link">
                <div class="game-button">
                    <img src="{{ url_for('static', filename='images/blackjackbutton.png') }}" class="game-icon"/>

                </div>
            </a>
            <a href="{{ url_for('plinko') }}" class="game-link">
                <div class="game-button">
                    <img src="{{ url_for('static', filename='images/plinkobutton.png') }}" class="game-icon"/>
                </div>
            </a>
            <a href="{{ url_for('mines') }}" class="game-link">
                <div class="game-button">
                    <img src="{{ url_for('static', filename='images/minesbutton.png') }}" class="game-icon"/>

                </div>
            </a>
        </div>

        <div class="placeholder-container">
            <img src="{{ url_for('static', filename='images/flagForSite.jpg') }}" class="teamflag"/>
        </div>

        <h2 class="transactions-label">transaction history</h2>
        <div class="transaction-table-container">
        {% if transactions %}
            <table class="transaction-table">
                <thead>
                    <tr>
                        <th>Game</th>
                        <th>Change</th>
                        <th>New Balance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for t in transactions %}
                        <tr>
                            <td>{{ t['game'] }}</td>
                            <td>{{ t['change'] }}</td>
                            <td>{{ t['new_balance'] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="transactions-label ">no transactions yet</p>
        {% endif %}
        </div>
        

    {% else %}
        <h2 class="home-subtitle">Welcome to Steak Co.</h2>
        <p class="home-paragraph">Please login or register to play.</p>
        <div class="login-register-container">
            <a href="{{ url_for('login') }}"><button class="btn-login-register">Go to Login</button></a>
        </div>
        <div class="placeholder-container">
            <img src="{{ url_for('static', filename='images/flagForSite.jpg') }}" class="teamflag"/>
        </div>
        
    {% endif %}
    </body>
</html>

